#+TITLE: 锁
#+DATE: 2014-03-23

* 读写锁 rwlock
这个是最常用的锁，我在开发 Minos 时大量使用了读写锁。我发现，当系统规模逐渐扩大时，
我发现读写锁竞争趋于白热化。

* RCU 锁
+ [[https://www.ibm.com/developerworks/cn/linux/l-rcu/][Linux 2.6 内核中新的锁机制--RCU]]

RCU 锁的一大特点是读共享数据时完全没有锁开销，而写共享数据时开销很大，因为会复制一
份。RCU 锁内部维护了一个指针，在 *恰当的时机* ，会将指针从指向老的共享数据转到指向
新的复制出来的数据，这个指针赋值用的是 atomic 操作。
